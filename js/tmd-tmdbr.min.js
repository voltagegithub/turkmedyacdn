var BBUVariables = { IsMobile: deviceInfo.isMobile || deviceInfo.isTablet, AjaxUrl: { UrlList: "/js/blist", BListUrl: "/js/getbs?url=" }, ContainsList: null, EqualsList: null, StartsWithList: null, BList: null, UrlType: { StartsWith: 1, Equals: 2, Contains: 3 }, SiteGeneli: "sitegeneli", ShowAttr: "data-showifexist-disabled", TestSection: function () { var t = RegExp("[\\?&]" + "reklam".replace(/[\[]/, "\\[").replace(/[\]]/, "\\]") + "=([^&#]*)").exec(location.search); return null === t ? "" : decodeURIComponent(t[1].replace(/\+/g, " ")) }, HasData: function () { return (BBUVariables.BList || []).length > 0 } }; if (location.host.indexOf("dailysabah.com") > -1 || "4342" == location.port) { var t = location.pathname.split("/").slice(1)[0]; ("deutsch" == t || "russian" == t || "arabic" == t) && (BBUVariables.AjaxUrl.UrlList = "/" + t + BBUVariables.AjaxUrl.UrlList, BBUVariables.AjaxUrl.BListUrl = "/" + t + BBUVariables.AjaxUrl.BListUrl) } var BBUFunctions = { SetBs: function () { try { if (!BBUVariables.HasData()) { if ("" == BBUVariables.TestSection()) { var t = window.location.protocol, e = window.location.host; $.getJSON(t + "//" + e + BBUVariables.AjaxUrl.UrlList, function (t) { t.Status && (BBUVariables.ContainsList = t.ContainsList, BBUVariables.EqualsList = t.EqualsList, BBUVariables.StartsWithList = t.StartsWithList, BBUFunctions.FillBs()) }).fail(function (t, e, a) { BBUFunctions.Log(a) }) } else BBUFunctions.FillBs() } } catch (a) { BBUFunctions.Log(a) } }, FillBs: function () { var t = window.location.protocol, e = window.location.host; $.getJSON(t + "//" + e + BBUVariables.AjaxUrl.BListUrl + BBUFunctions.GetBBUUrl() + "&ismobile=" + BBUVariables.IsMobile, function (t) { t.Status && (BBUVariables.BList = t.List, BBUFunctions.SetElements(!1)) }).fail(function (t, e, a) { BBUFunctions.Log(a) }) }, GetBBUUrl: function () { var t = BBUVariables.TestSection(); if (null != t && "" != t) return t + "&type=" + BBUVariables.UrlType.Equals; var e = document.location.pathname; if ((document.location.href.indexOf(".atv.com.tr/webtv/") > -1 || 0 == document.location.href.indexOf(".atvavrupa.tv/webtv/")) && null != document.location.search && 0 == document.location.search.indexOf("?id=")) { var a = document.location.search.split("&"); e = document.location.pathname + a[0] } if ($('meta[property="tmdbr"]').length > 0 && (e = $('meta[property="tmdbr"]').attr("content")), "" == e || "/" == e || 0 == e.indexOf("/anasayfa")) return "/&type=" + BBUVariables.UrlType.Equals; for (var n = "", i = 0; i < BBUVariables.ContainsList.length; i++)e.indexOf(BBUVariables.ContainsList[i].Url) > -1 && (n = "&contains=" + BBUVariables.ContainsList[i].Url); for (var i = 0; i < BBUVariables.EqualsList.length; i++)if (BBUVariables.EqualsList[i].Url == e) return BBUVariables.EqualsList[i].Url + "&type=" + BBUVariables.UrlType.Equals + n; for (var r = [], l = e.split("/"), i = l.length - 1; i >= 0; i--) { for (var s = 0; s < BBUVariables.StartsWithList.length; s++) { var o = BBUVariables.StartsWithList[s]; 0 == e.indexOf(o.Url) && -1 == r.indexOf(o.Url) && r.push(o.Url) } e = e.replace("/" + l[i], "") } if (r.length > 0) { for (var B = (r = r.sort(function (t, e) { return e.split("/").length - t.split("/").length }))[0].split("/").length, u = [], i = 0; i < r.length; i++)r[i].split("/").length == B && u.push(r[i]); return (r = u.sort(function (t, e) { return e.length - t.length }))[0] + "&type=" + BBUVariables.UrlType.StartsWith + n } return BBUVariables.SiteGeneli + "&type=" + BBUVariables.UrlType.Equals + n }, SetElements: function (t) { try { if (!BBUVariables.HasData()) return; var e = [], a = $("div[data-mbzone], div[data-wbzone], div[data-bzone]").not("[data-bzone='GENERAL'], [data-bzone='Head_Dac']"); e = BBUVariables.IsMobile ? a.filter("div[data-mbzone], div[data-bzone]") : a.filter("div[data-wbzone], div[data-bzone]"), $(e).each(function (e, a) { try { var n = BBUFunctions.GetAttrInfoForElement(a), i = BBUFunctions.GetBItem(n.Zone, t); if (i) { if (["takvim", "ahaber", "aspor", "yeniasir", "fotomac", "atv"].some(t => window.location.origin.includes(t))) { let r = !!a.offsetParent; if (r) { if (i.IsIframe) $(a).html('<iframe src="/js/biframe/' + i.Id + "/" + BBUVariables.IsMobile + '" scrolling="no" marginheight="0" marginwidth="0" allowtransparency="true" frameborder="0" width="' + i.IframeWidth + '" height="' + i.IframeHeight + '"></iframe>'); else { var l = BBUFunctions.Eval(n.Zone, t); if ((l || "").trim()) try { $(a).html(l) } catch (s) { } } } } else if (i.IsIframe) $(a).html('<iframe src="/js/biframe/' + i.Id + "/" + BBUVariables.IsMobile + '" scrolling="no" marginheight="0" marginwidth="0" allowtransparency="true" frameborder="0" width="' + i.IframeWidth + '" height="' + i.IframeHeight + '"></iframe>'); else { var l = BBUFunctions.Eval(n.Zone, t); if ((l || "").trim()) try { $(a).html(l) } catch (o) { } } $(a).attr(n.AttributeUsed, n.Zone).removeAttr(n.Attribute) } else $(a).attr("data-norecord", ""); t && $(a).attr("data-infinite-zone", "true") } catch (B) { BBUFunctions.Log(B) } }), !t && $("div[data-bzone='Head_Dac']").length > 0 && $("div[data-bzone = 'Head_Dac']").html(BBUFunctions.Eval("Head_Dac", !1)), !t && $("div[data-bzone='GENERAL']").length > 0 && $("div[data-bzone = 'GENERAL']").html(BBUFunctions.Eval("GENERAL", !1)) } catch (n) { BBUFunctions.Log(n) } }, SetInfiniteBs: function (t) { try { t.each(function (t, e) { var a = BBUFunctions.GetAttrInfoForElement(e); $(e).attr(a.AttributeUsed) && $(e).attr(a.Attribute, $(e).attr(a.AttributeUsed)).removeAttr(a.AttributeUsed) }), BBUFunctions.SetElements(!0) } catch (e) { BBUFunctions.Log(e) } }, GetBItem: function (t, e) { e && !t.includes("_infinite") && (t += "_infinite"); for (var a = 0; a < BBUVariables.BList.length; a++)if (BBUVariables.BList[a].Zone == "_" + t) return BBUVariables.BList[a]; return null }, Eval: function (t, e) { var a = BBUFunctions.GetBItem(t, e); return null != a && a.IsActive ? a.Script : "" }, BForPlatform: function (t, e) { var a = document.createElement("div"); return t && a.setAttribute("data-wbzone", t), e && a.setAttribute("data-mbzone", e), a.outerHTML }, GetAttrInfoForElement: function (t) { if (!t) return ""; var e = "", a = ""; return BBUVariables.IsMobile ? (t.hasAttribute("data-mbzone") || t.hasAttribute("data-mbzone-loaded")) && (a = "data-mbzone") : (t.hasAttribute("data-wbzone") || t.hasAttribute("data-wbzone-loaded")) && (a = "data-wbzone"), (!a && t.hasAttribute("data-bzone") || t.hasAttribute("data-bzone-loaded")) && (a = "data-bzone"), { Zone: e = t.getAttribute(a) || t.getAttribute(a + "-loaded"), Attribute: a, AttributeUsed: a + "-loaded" } }, TryParseInt: function (t, e) { try { var a = e; return null !== t && t.length > 0 && !isNaN(t) && (a = parseInt(t)), a } catch (n) { return BBUFunctions.Log(n), 0 } }, Log: function (t) { window.console && console.log(t) }, HideWithoutContent: function () { for (var t = document.querySelectorAll("[" + BBUVariables.ShowAttr + "]"), e = 0; e < t.length; e++)$(t[e]).attr("style", "display: none !important") }, FirstSet: function () { $("[data-bzone], [data-mbzone], [data-wbzone]").length > 0 && BBUFunctions.SetBs() }, HideEmptyAdZone: function () { var t = $("[data-bzone], [data-mbzone], [data-wbzone]", "[data-bzone-loaded], [data-mbzone-loaded], [data-wbzone-loaded]"); $.each(t, function (t, e) { if ($(e).is(":empty")) $(e).attr("style", "display: none !important"); else { var a = e.querySelector("div[data-google-query-id]"); a && a.style ?.display == "none" && a.dataset ?.googleQueryId != "" && $(e).attr("style", "display: none !important")} }) } }; $(document).ready(function () { try { $("[data-bzone], [data-mbzone], [data-wbzone]").length > 0 && (BBUFunctions.SetBs(), setTimeout(function () { BBUFunctions.HideEmptyAdZone() }, 1e4)) } catch (t) { BBUFunctions.Log(t.message) } }), window.addEventListener("DOMContentLoaded", function () { }, !0); var ZoneFunctions = function () { var t, e = window.location.protocol + "//" + window.location.host, a = null, n = null, i = null, r = null; this.HideInactiveZone = function (t, e) { null != this.BList && 0 == this.BList.filter(function (e) { return e.Zone == t }).length && $("#" + e).remove() }, t = e + BBUVariables.AjaxUrl.UrlList, $.ajax({ type: "GET", url: t, data: {}, dataType: "json", async: !1, success: function (t) { var l; a = t.ContainsList, n = t.EqualsList, i = t.StartsWithList, l = e + BBUVariables.AjaxUrl.BListUrl + function t() { var e = BBUVariables.TestSection(); if (null != e && "" != e) return e + "&type=" + BBUVariables.UrlType.Equals; var r = document.location.pathname; if ((document.location.href.indexOf(".atv.com.tr/webtv/") > -1 || 0 == document.location.href.indexOf(".atvavrupa.tv/webtv/")) && null != document.location.search && 0 == document.location.search.indexOf("?id=")) { var l = document.location.search.split("&"); r = document.location.pathname + l[0] } if ($('meta[property="tmdbr"]').length > 0 && (r = $('meta[property="tmdbr"]').attr("content")), "" == r || "/" == r || 0 == r.indexOf("/anasayfa")) return "/&type=" + BBUVariables.UrlType.Equals; for (var s = "", o = 0; o < a.length; o++)r.indexOf(a[o].Url) > -1 && (s = "&contains=" + a[o].Url); for (var o = 0; o < n.length; o++)if (n[o].Url == r) return n[o].Url + "&type=" + BBUVariables.UrlType.Equals + s; for (var B = [], u = r.split("/"), o = u.length - 1; o >= 0; o--) { for (var c = 0; c < i.length; c++) { var d = i[c]; 0 == r.indexOf(d.Url) && -1 == B.indexOf(d.Url) && B.push(d.Url) } r = r.replace("/" + u[o], "") } if (B.length > 0) { for (var b = (B = B.sort(function (t, e) { return e.split("/").length - t.split("/").length }))[0].split("/").length, U = [], o = 0; o < B.length; o++)B[o].split("/").length == b && U.push(B[o]); return (B = U.sort(function (t, e) { return e.length - t.length }))[0] + "&type=" + BBUVariables.UrlType.StartsWith + s } return BBUVariables.SiteGeneli + "&type=" + BBUVariables.UrlType.Equals + s }() + "&ismobile=" + BBUVariables.IsMobile, $.ajax({ type: "GET", url: l, data: {}, dataType: "json", async: !1, success: function (t) { r = t.List } }) } }) }, zoneFunctions = new ZoneFunctions;